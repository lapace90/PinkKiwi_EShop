{# 
    Composant carte produit réutilisable
    Usage: {% include 'components/product_card.html.twig' with {'product': product, 'size': 'large'} %}
    Sizes: 'large' (featured), 'medium' (default), 'small' (latest)
#}

{% set cardSize = size|default('medium') %}

{% if cardSize == 'large' %}
    {# Grande carte (Featured Products) #}
    <div class="card h-100 product-card">
        <div style="overflow: hidden; height: 250px;">
            <img src="{{ product.picture }}" class="card-img-top" alt="{{ product.name }}" style="height: 250px; object-fit: cover; width: 100%;">
        </div>
        <div class="card-body">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text text-muted small">{{ product.subtitle|slice(0, 60) }}{% if product.subtitle|length > 60 %}...{% endif %}</p>
            <div class="d-flex justify-content-between align-items-center mt-3">
                <span class="price-tag">{{ (product.price/100)|number_format(2) }} €</span>
                <div class="rating-stars">
                    {% for i in 1..5 %}
                        {% if i <= product.getAvgRatings %}
                            <i class="fas fa-star text-warning"></i>
                        {% else %}
                            <i class="far fa-star text-warning"></i>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="d-grid">
                <a href="{{ path('product', {'slug': product.slug}) }}" class="btn btn-outline-primary">
                    <i class="fas fa-eye me-2"></i>View Details
                </a>
            </div>
        </div>
    </div>

{% elseif cardSize == 'small' %}
    {# Petite carte (Latest Products) #}
    <div class="card h-100 product-card-small">
        <div style="overflow: hidden; height: 200px;">
            <img src="{{ product.picture }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: cover; width: 100%;">
        </div>
        <div class="card-body">
            <h6 class="card-title mb-2">{{ product.name|slice(0, 35) }}{% if product.name|length > 35 %}...{% endif %}</h6>
            <p class="text-primary fw-bold mb-3">{{ (product.price/100)|number_format(2) }} €</p>
            <a href="{{ path('product', {'slug': product.slug}) }}" class="btn btn-sm btn-outline-secondary w-100">
                <i class="fas fa-arrow-right me-1"></i> View
            </a>
        </div>
    </div>

{% else %}
    {# Carte moyenne (par défaut - pour la page products) #}
    <div class="card h-100 product-card">
        <div style="overflow: hidden; height: 220px;">
            <img src="{{ product.picture }}" class="card-img-top" alt="{{ product.name }}" style="height: 220px; object-fit: cover; width: 100%;">
        </div>
        <div class="card-body">
            <div class="rating-stars mb-2">
                {% for i in 1..5 %}
                    {% if i <= product.getAvgRatings %}
                        <i class="fas fa-star text-warning"></i>
                    {% else %}
                        <i class="far fa-star text-warning"></i>
                    {% endif %}
                {% endfor %}
            </div>
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text text-muted small">{{ product.subtitle|slice(0, 50) }}{% if product.subtitle|length > 50 %}...{% endif %}</p>
            <div class="d-flex justify-content-between align-items-center mt-3">
                <span class="price-tag">{{ (product.price/100)|number_format(2) }} €</span>
                <span class="badge bg-secondary">{{ product.category.name }}</span>
            </div>
        </div>
        <div class="card-footer">
            <div class="d-grid">
                <a href="{{ path('product', {'slug': product.slug}) }}" class="btn btn-outline-primary">
                    <i class="fas fa-eye me-2"></i>View Details
                </a>
            </div>
        </div>
    </div>
{% endif %}